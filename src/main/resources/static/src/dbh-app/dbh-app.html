<link rel="import" href="../../bower_components/paper-drawer-panel/paper-drawer-panel.html">
<link rel="import" href="../../bower_components/paper-header-panel/paper-header-panel.html">
<link rel="import" href="../../bower_components/paper-toolbar/paper-toolbar.html">
<link rel="import" href="../../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../../bower_components/paper-menu/paper-menu.html">
<link rel="import" href="../../bower_components/paper-item/paper-item.html">
<link rel="import" href="../../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../../bower_components/iron-location/iron-location.html">


<link rel="import" href="../dbh-login/dbh-login.html">
<link rel="import" href="../dbh-home/dbh-home.html">
<link rel="import" href="../dbh-profile-musician/dbh-profile-musician.html">

<dom-module id="dbh-app">
  <template>
    <style>
      html {
        color: white;
      }

      :host {
        display: block;
        font-family: Roboto;
        color: white;
      }

      paper-drawer-panel {
        --paper-drawer-panel-main-container: {
          background-color: rgb(102,205,170);
          color: white;
        };

        --paper-drawer-panel-left-drawer-container: {
          background-color: rgb(102,205,170);
          color: white;
        };
      }
      paper-menu,
      paper-item {
        background: rgb(102,205,170);
        color: white;
      }

      paper-toolbar {
        background: rgb(191,33,32)
      }

      paper-input {
        color: white
      }
    </style>
    <iron-location id="location"></iron-location>
    <paper-drawer-panel narrow>
      <paper-header-panel drawer>
        <paper-toolbar>
          <div>Menu</div>
        </paper-toolbar>
        <paper-item hidden="[[authorized]]">Login</paper-item>
        <paper-menu hidden="[[!authorized]]" selected="{{selectedIndex}}">
          <paper-item>Home</paper-item>
          <paper-item>News</paper-item>
          <paper-item>About us</paper-item>
          <paper-item>Register/login</paper-item>
        </paper-menu>
      </paper-header-panel>
      <paper-header-panel main>
        <paper-toolbar>
          <paper-icon-button icon="menu" paper-drawer-toggle></paper-icon-button>
          <div>Music2Nation</div>
        </paper-toolbar>
        <div>
          <dbh-login hidden="[[authorized]]" authorized="{{authorized}}"></dbh-login>
          <dbh-home id="item0"></dbh-home>
          <dbh-profile-musician id="item1"></dbh-profile-musician>
        </div>
      </paper-header-panel>
    </paper-drawer-panel>
  </template>

  <script>
    Polymer({

      is: 'dbh-app',

      properties: {
        selectedIndex: {
          type: Number,
          value: 0,
          observer: 'menuChanged'
        },
        authorized: {
          type: Boolean,
          observer: 'authorizedChanged'
        }
      },

      ready: function() {
        this.$.item0.hidden = true;
        this.$.item1.hidden = true;
      },

      menuChanged: function(newIndex, oldIndex) {
          if (!this.authorized) {
              return;
          }
          if (typeof oldIndex != "undefined") {
              this.$["item" + oldIndex].hidden = true;
          }
          this.$["item" + newIndex].hidden = false;
      },

      authorizedChanged: function() {
        this.$.item0.hidden = false;
      }

    });
  </script>
</dom-module>
