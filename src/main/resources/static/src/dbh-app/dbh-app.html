<link rel="import" href="../../bower_components/paper-toolbar/paper-toolbar.html">
<link rel="import" href="../../bower_components/paper-item/paper-item.html">
<link rel="import" href="../../bower_components/paper-material/paper-material.html">
<link rel="import" href="../../bower_components/paper-drawer-panel/paper-drawer-panel.html">
<link rel="import" href="../../bower_components/paper-header-panel/paper-header-panel.html">
<link rel="import" href="../../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../../bower_components/iron-location/iron-location.html">
<link rel="import" href="../../bower_components/paper-card/paper-card.html">
<link rel="import" href="../../bower_components/iron-image/iron-image.html">
<link rel="import" href="../../bower_components/iron-flex-layout/iron-flex-layout-classes.html">


<link rel="import" href="../dbh-login/dbh-login.html">
<link rel="import" href="../dbh-maps/dbh-maps.html">
<link rel="import" href="../dbh-home/dbh-home.html">
<link rel="import" href="../dbh-news/dbh-news.html">
<link rel="import" href="../dbh-about-us/dbh-about-us.html">
<link rel="import" href="../dbh-contact/dbh-contact.html">
<link rel="import" href="../dbh-profile-musician/dbh-profile-musician.html">

<dom-module id="dbh-app">
  <template>
      <style is="custom-style" include="iron-flex iron-flex-alignment">
          :host {
            display: block;
            font-family: Didact Gothic; !important;
            color: white;
            height: 100%;
            background: rgb(102, 205, 170);
          }

          paper-toolbar {
            background: rgb(191,33,32)
          }

      </style>

    <iron-location id="location"></iron-location>

      <div>
        <paper-toolbar>
            <paper-item id="0" on-tap="openScreen">Home</paper-item>
            <paper-item id="1" on-tap="openScreen">News</paper-item>
            <paper-item id="2" on-tap="openScreen">About us</paper-item>
            <paper-item id="3" on-tap="openScreen">Contact</paper-item>
            <paper-item id="4" on-tap="openScreen" hidden="[[authorized]]">Register/Login</paper-item>
        </paper-toolbar>
        <div>
          <dbh-home id="item0" role="{{role}}"></dbh-home>
          <dbh-news id="item1"></dbh-news>
          <dbh-about-us id="item2"></dbh-about-us>
          <dbh-contact id="item3"></dbh-contact>
          <dbh-login id="item4" role="{{role}}" authorized="{{authorized}}"></dbh-login>
          <dbh-profile-musician id="item5"></dbh-profile-musician>
        </div>
      </div>
  </template>

  <script>
    Polymer({

      is: 'dbh-app',

      properties: {
        selectedIndex: {
          type: Number,
          value: 0,
          observer: 'selectedIndexChanged'
        },
        authorized: {
          type: Boolean,
          observer: 'authorizedChanged'
        },
        role: {
            type: String,
            observer: 'roleChanged'
        }
      },

      ready: function() {
        this.$.item0.hidden = false;
        this.$.item1.hidden = true;
        this.$.item3.hidden = true;
        this.$.item4.hidden = true;
        this.$.item5.hidden = true;
      },

      openScreen: function(id) {
        this.selectedIndex = +event.target.id;
      },

      selectedIndexChanged: function(newIndex, oldIndex) {
        console.log(newIndex,oldIndex);
        if (typeof oldIndex !== "undefined") {
          this.$["item" + oldIndex].hidden = true;
        }
        this.$["item" + newIndex].hidden = false;
      },

      authorizedChanged: function() {
        this.selectedIndex = 0;
      },

      roleChanged: function() {

      }

    });
  </script>
</dom-module>
